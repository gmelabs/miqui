# HEADER: This file is managed by puppet.
# HEADER: It cannot be managed manually, and it is definitely not recommended.

#   Version 6.1.1
# DO NOT EDIT THIS FILE!
# Please make all changes to files in $SPLUNK_HOME/etc/system/local.
# To make changes, copy the section/stanza you want to change from $SPLUNK_HOME/etc/system/default
# into ../local and edit there.
#
# This file configures global saved search actions.
#

# The global maximum number of results to be emailed. Any alert level  
# max-results greater than this number will be capped at this level.
#
maxresults=10000

# Set the hostname that is displayed in the link sent in alerts.
# The resulting link is "http://hostname:port/......."
# Can be any string, or empty to pick up the hostname automatically.
#
hostname=


# set the ttl of the artifacts to at 10 periods
ttl = 10p

# the maximum amount of time to spend running an action
maxtime = 5m

track_alert = 0

[email]

# from email address (name only, host will be appended automatically from mailserver)
#
from=splunk

subject 		= Splunk Alert: $name$
subject.alert 	= Splunk Alert: $name$
subject.report 	= Splunk Report: $name$
useNSSubject	= 0

# Specify the format of the results in the email as either: 
# table, raw, csv.
#
format = table

# SMTP server sending out all alert emails
#
mailserver = localhost

use_ssl    = 0
use_tls    = 0

# username and password to be used to authenticate with the SMTP server
auth_username   = 
auth_password   = 

# Set to true if you have a PDF report server available on the network.
reportServerEnabled = false

# If using a non-local pdf server, set to the correct URL here
# reportServerURL = http://remoteserver:8089/services/pdfserver/renderpdf
reportServerURL = 

# Default paper size for PDFs
# Can be one of letter, legal, a2, a3, a4, a5
reportPaperSize = letter

# Paper orientation: portrait or landscape
reportPaperOrientation = portrait

# Integrated PDF rendering adds a Splunk logo to the corner of the rendered page
# Disable by setting this to 0 (false)
reportIncludeSplunkLogo = 1

# Integrated PDF rendering will load the following CID fonts in the given order
# if multiple fonts have a glyph for a given character code, then the glyph from the 
# first font will be used
reportCIDFontList = gb cns jp kor

# Specify whether to attach results as a file 
# or add them to the body of the email (inline)
# options:  true (inline the results in the email), false (attach results 
# as a file)
#
inline = 0

# Set the priority of the email as it appears in the email client. 
# Values 5 - 1, map to Lowest, Low, Normal, High, Highest.
# Defaults to normal or 3.
priority             = 3

preprocess_results = 

track_alert          = 1
to                   =
cc                   =
bcc                  =
message.report       = The scheduled report '$name$' has run.
message.alert        = The alert condition for '$name$' was triggered.

footer.text = If you believe you've received this email in error, please see your Splunk administrator.\
\
splunk > the engine for machine data

include.results_link = 1 
include.view_link    = 1
include.search       = 0
include.trigger      = 0
include.trigger_time = 0

sendresults          = 0
sendpdf              = 0
sendcsv              = 0
pdfview              = 
ttl                  = 86400
maxtime              = 5m
width_sort_columns   = 1
command     = $action.email.preprocess_results{default=""}$ | sendemail "results_link=$results.url$" "ssname=$name$" "graceful=$graceful{default=True}$" "trigger_time=$trigger_time$" maxinputs="$action.email.maxresults{default=10000}$" maxtime="$action.email.maxtime{default=5m}$" results_file="$results.file$"

[rss]
ttl     = 86400
maxtime = 1m
command = createrss "path=$name$.xml" "name=$name$" "link=$results.url$" "descr=Alert trigger: $name$, results.count=$results.count$ " "count=30" "graceful=$graceful{default=1}$" maxtime="$action.rss.maxtime{default=1m}$"

[summary_index]
_name   = summary
# run the summary index command during the original search
inline  = 1
ttl     = 120
# make sure the following keys are not added to marker (command, ttl, maxresults, _*)
command = summaryindex spool=t uselb=t addtime=t index="$action.summary_index._name{required=yes}$" file="$name_hash$_$#random$.stash_new" name="$name$" marker="$action.summary_index*{format=$KEY=\\\"$VAL\\\", key_regex="action.summary_index.(?!(?:command|inline|maxresults|maxtime|ttl|track_alert|(?:_.*))$)(.*)"}$"

[script]
track_alert = 1
ttl         = 600
maxtime     = 5m
filename    = 
command     = runshellscript "$action.script.filename$" "$results.count$" "$search$" "$search$" "$name$" "Saved Search [$name$] $counttype$($results.count$)" "$results.url$" "$deprecated_arg$" "$search_id$" "$results.file$" maxtime="$action.script.maxtime{default=5m}$"

[populate_lookup]
ttl     = 120
dest    = 
command = copyresults dest="$action.populate_lookup.dest$"  sid="$search_id$"

